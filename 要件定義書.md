# 縦書き文書作成アプリ 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
**VerticalWrite**（仮称）

### 1.2 目的・背景
- 日本語の縦書き文書を快適に作成できるWebアプリケーション
- 一太郎のような縦書きエディタの軽量Web版
- 個人利用向けシンプル設計

### 1.3 ターゲットユーザー
- 日本語で縦書き文書を作成したい個人ユーザー
- 小説、エッセイ、手紙などの創作活動を行う人

## 2. 機能要件

### 2.1 基本機能

#### エディタ機能
- [x] 縦書きテキスト入力・編集
- [x] 文字サイズ変更（12px〜24px）
- [x] フォント選択（明朝体、ゴシック体）
- [x] 行間調整
- [x] 文字間調整
- [x] ページサイズ設定（A4、B5、カスタム）

#### 日本語処理
- [x] 句読点の適切な配置
- [x] 数字・英字の縦中横処理
- [x] ルビ（ふりがな）機能
- [x] 禁則処理（行頭・行末処理）

#### 文書管理
- [x] 文書の保存（ブラウザ内ストレージ）
- [x] 文書の読み込み
- [x] 文書一覧表示
- [x] 文書の削除
- [x] 文書名変更

#### インポート・エクスポート
- [x] テキストファイル（.txt）インポート
- [x] テキストファイル（.txt）エクスポート
- [x] PDF出力（印刷機能）

### 2.2 UI/UX機能
- [x] レスポンシブデザイン
- [x] ダークモード切り替え
- [x] ツールバー（固定配置）
- [x] ショートカットキー対応
- [x] 文字数カウント表示
- [x] ページ数表示

## 3. 非機能要件

### 3.1 性能要件
- ページ読み込み時間：3秒以内
- 文字入力レスポンス：100ms以内
- 大容量文書対応：10万文字まで

### 3.2 互換性要件
- ブラウザ対応：Chrome, Firefox, Safari, Edge（最新版）
- デバイス対応：PC、タブレット
- 画面解像度：1024x768以上

### 3.3 可用性要件
- GitHub Pagesによる99.9%稼働率
- オフライン機能（ServiceWorker対応）

### 3.4 セキュリティ要件
- データはブラウザ内のみに保存
- 外部送信なし（プライバシー保護）
- XSS対策実装

## 4. 技術仕様

### 4.1 フロントエンド技術
- **フレームワーク**: React 18 + TypeScript
- **ビルドツール**: Vite
- **スタイリング**: CSS Modules + PostCSS
- **ステート管理**: Zustand
- **ストレージ**: IndexedDB（Dexie.js）

### 4.2 開発・デプロイ
- **開発環境**: Node.js 18+
- **テスト**: Vitest + React Testing Library
- **リンター**: ESLint + Prettier
- **デプロイ**: GitHub Pages
- **CI/CD**: GitHub Actions

### 4.3 ディレクトリ構成
```
src/
├── components/         # Reactコンポーネント
│   ├── Editor/        # エディタ関連
│   ├── Toolbar/       # ツールバー
│   ├── Sidebar/       # サイドバー
│   └── common/        # 共通コンポーネント
├── hooks/             # カスタムフック
├── utils/             # ユーティリティ関数
├── types/             # TypeScript型定義
├── styles/            # グローバルスタイル
└── db/                # データベース操作
```

## 5. データ設計

### 5.1 文書データ構造
```typescript
interface Document {
  id: string;
  title: string;
  content: string;
  createdAt: Date;
  updatedAt: Date;
  settings: {
    fontSize: number;
    fontFamily: string;
    lineHeight: number;
    charSpacing: number;
    pageSize: 'A4' | 'B5' | 'custom';
  };
}
```

### 5.2 ストレージ設計
- **IndexedDB**: メイン文書データ
- **localStorage**: アプリ設定（テーマ、デフォルト設定）
- **sessionStorage**: 一時データ（編集中状態）

## 6. UI/UXガイドライン

### 6.1 レイアウト
- **ヘッダー**: ツールバー（固定）
- **メイン**: エディタエリア（縦書き表示）
- **サイドバー**: 文書一覧（トグル表示）
- **フッター**: ステータス表示

### 6.2 カラーパレット
- **プライマリ**: #2563eb（青）
- **セカンダリ**: #64748b（グレー）
- **アクセント**: #dc2626（赤）
- **背景**: #ffffff / #1f2937（ライト/ダーク）

### 6.3 タイポグラフィ
- **本文**: 游明朝体, serif
- **UI**: Inter, sans-serif
- **コード**: Fira Code, monospace

## 7. 開発工程

### 7.1 Phase 1（基盤構築）
- プロジェクトセットアップ
- 基本レイアウト作成
- 縦書きエディタ実装

### 7.2 Phase 2（機能拡張）
- 文書管理機能
- インポート・エクスポート
- 日本語処理強化

### 7.3 Phase 3（完成・リリース）
- テスト・デバッグ
- パフォーマンス最適化
- ドキュメント整備

## 8. 品質保証

### 8.1 テスト戦略
- **単体テスト**: コンポーネント・関数レベル
- **統合テスト**: 機能間連携
- **E2Eテスト**: ユーザーシナリオ
- **アクセシビリティテスト**: WCAG準拠

### 8.2 パフォーマンス指標
- **Core Web Vitals**: 良好な評価
- **Lighthouse Score**: 90点以上
- **バンドルサイズ**: 500KB以下

## 9. リスク管理

### 9.1 技術リスク
- **ブラウザ互換性**: 段階的対応、Polyfill使用
- **パフォーマンス**: 仮想化、遅延読み込み実装

### 9.2 運用リスク
- **データ消失**: エクスポート機能推奨
- **ブラウザ更新**: 定期的な動作確認

## 10. 今後の拡張計画

### 10.1 近未来
- PWA対応（オフライン動作）
- クラウド同期機能
- テンプレート機能

### 10.2 長期
- デスクトップアプリ版（Electron）
- 高度な組版機能
- マルチデバイス同期

---

**策定日**: 2025年8月10日  
**最終更新**: 2025年8月10日  
**承認者**: プロジェクト責任者